define("basePopupSelect",function(e,t,a){function i(){m.myEvent.init(k),y=new Vue({el:"#ddui-basePopupSelect",data:{top:0,left:0,ownEvent:"popupSelect_OK",isHide:!0,selected:"",type:"radio",group:[],showGroup:"",showList:[],groupData:{},other:{name:"",value:"",selected:!1},uploadFile:!1},methods:{groupClick:function(e){var t=e.target,a=t.getAttribute("data-name");"popup_uploadFile"===a&&(r(),m.myEvent.trigger(b[0]||document,k)),"checkbox"===t.type&&n(this.groupData[a],t.checked),a&&this.showGroup!=a&&(this.showGroup=a)},itemBoxClick:function(e){var t=e.target;if("input"===t.nodeName.toLowerCase())if("radio"===t.type)o(t);else if("checkbox"===t.type&&!t.checked){var a=this.showGroup;this.group.forEach(function(e){return e.name===a?void(e.selected=!1):void 0})}},otherClick:function(e){var t=e.target;"input"===t.nodeName.toLowerCase()&&"radio"===this.type&&o(t)},okClick:function(){o()},cancelClick:function(){this.isHide=!0}},watch:{showGroup:function(e){this.showList=this.groupData[e]||[]},isHide:function(e){e&&(this.data={top:0,left:0,isHide:!1,selected:"",type:"radio",group:[],showGroup:"",showList:[],groupData:{},other:{name:"",value:"",selected:!1}})}}})}function o(e){e?s.selectData={id:[e.value],name:[e.getAttribute("data-name")]}:c();var t=b[0]||document;m.myEvent.trigger(t,y.ownEvent),r()}function n(e,t){e.forEach(function(e){e.item.forEach(function(e){e.selected=t})})}function l(e,t,a){r(),b=a;var i=JSON.parse(JSON.stringify(e));p(i),u(t),y.isHide=!1,setTimeout(function(){d(e.top,e.left)},100)}function p(e){for(var t in e)y.$data.hasOwnProperty(t)&&(y[t]=e[t]);y.showGroup||(y.showGroup=y.group[0].name),y.type=e.type||"radio",y.ownEvent=e.ownEvent||"cityList_ok",y.showList=y.groupData[y.showGroup],m.myEvent.init(y.ownEvent)}function u(e){if(e)if("radio"===y.type)y.selected=e[0];else if("checkbox"===y.type){var t={};e.forEach(function(e){t[e]=!0,e==y.other.value&&(y.other.selected=!0)});for(var a in y.groupData){var i=y.groupData[a];i.forEach(function(e){e.item.forEach(function(e){e.selected=t[e.value]?!0:!1})})}}y.showList=y.groupData[y.showGroup]}function r(){clearTimeout(w),y.isHide=!0}function c(){if(s.selectData={id:[],name:[]},"radio"===y.type)s.selectData.id=[y.selected],s.selectData.name=[y.selected];else{for(var e in y.groupData){var t=y.groupData[e];t.forEach(function(e){e.item.forEach(function(e){e.selected&&(s.selectData.id.push(e.value),s.selectData.name.push(e.name))})})}y.other.selected&&(s.selectData.id.push(y.other.value),s.selectData.name.push(y.other.name))}}function d(){var e=5,t=b.offset(),a=b.height(),i=t.top+a+e,o=t.left,n=g.height(),l=g.width();i+h.h>n&&(i=i-h.h-a-e),o+h.w>l&&(o=l-h.w-50),y.top=i,y.left=o}var s={},v='<div class="ddui-popupSelect" id="ddui-basePopupSelect" v-class="hide:isHide" v-style="top: top + \'px\',\r\n  left: left + \'px\'">\r\n<div class="ddui-popupSelect-group-wrap flex-box-row">\r\n	<template v-if="type==\'radio\'">\r\n	<ul class="ddui-popupSelect-group " v-on="click:groupClick($event)">\r\n\r\n			<li v-if="uploadFile" title="上传文件" data-id="popup_uploadFile" data-name="popup_uploadFile" class="ddui-uoload"><i class="iconfont ddui-font-shangchuan"></i>上传</li>\r\n\r\n		<li v-repeat="g:group" title="{{g.name}}" v-attr="data-id:g.id,data-name:g.name" v-class="ddui-popupSelect-group-active:showGroup==g.name">{{g.name}}</li>\r\n	</ul>\r\n	<ul class="ddui-popupSelect-item-wrap flex-box-1" v-on="click:itemBoxClick($event)">\r\n			<li v-repeat="it:showList">\r\n				<h5 class="ddui-popupSelect-item-title" v-if="it.title">{{it.title}}</h5>\r\n				<div class="ddui-popupSelect-item-box">\r\n					<label class="ddui-popupSelect-item-label" v-repeat="item:it.item">\r\n						<input type="radio" name="popupSelect" v-model="selected" value="{{item.value}}" v-attr="data-name:item.name"><span>{{item.name}}</span>\r\n					</label>\r\n				</div>\r\n			</li>\r\n	</ul>\r\n</template>\r\n<template v-if="type==\'checkbox\'">\r\n	<ul class="ddui-popupSelect-group " v-on="click:groupClick($event)">\r\n        <li v-if="uploadFile" title="上传文件" data-id="popup_uploadFile" data-name="popup_uploadFile" class="ddui-uoload"><i class="iconfont ddui-font-shangchuan"></i>上传</li>\r\n		<li v-repeat="g:group" title="{{g.name}}" v-attr="data-id:g.id,data-name:g.name" v-class="ddui-popupSelect-group-active:showGroup==g.name">\r\n			<input type="checkbox" name="popupSelect" v-model="g.selected" value="{{g.value}}" v-attr="data-name:g.name"/>{{g.name}}</li>\r\n	</ul>\r\n	<ul class="ddui-popupSelect-item-wrap flex-box-1" v-on="click:itemBoxClick($event)">\r\n			<li v-repeat="it:showList">\r\n				<h5 class="ddui-popupSelect-item-title" v-if="it.title">{{it.title}}</h5>\r\n				<div class="ddui-popupSelect-item-box">\r\n					<label class="ddui-popupSelect-item-label" v-repeat="item:it.item">\r\n						<input type="checkbox" name="popupSelect" v-model="item.selected" value="{{item.value}}" v-attr="data-name:item.name"><span>{{item.name}}</span>\r\n					</label>\r\n				</div>\r\n			</li>\r\n	</ul>\r\n</template>\r\n\r\n	</div>\r\n	<div class="ddui-popupSelect-btn-box">\r\n		<template v-if="type==\'radio\'"> \r\n			<label class="ddui-popupSelect-all" v-if="other.name"><input type="radio" value="{{other.value}}" v-model="selected" v-on="click:otherClick($event)" v-attr="data-name:other.name"><span>{{other.name}}</span></label>\r\n		</template>\r\n		<template v-if="type==\'checkbox\'">\r\n			<label class="ddui-popupSelect-all" v-if="other.name"><input type="checkbox" value="{{other.value}}" v-model="other.selected" v-on="click:otherClick($event)" v-attr="data-name:other.name"><span>{{other.name}}</span></label>\r\n		</template>\r\n\r\n	 	<input type="button" value="取消" class="ddui-btn-cancel ddui-btn02 right" v-on="click:cancelClick"/>\r\n	  	<input type="button" value="确定" class="ddui-btn ddui-btn02 right" v-on="click:okClick"/>\r\n	</div>	\r\n</div>\r\n',m=e("myTool"),h={},f={},g=$("body"),b={},w=0,k="popup_uploadFile";$(document).ready(function(){g.append(v),i(),f=$("#ddui-basePopupSelect"),h={h:f.height(),w:f.width()},f.on("mouseleave",function(){w=setTimeout(function(){r()},2e3)}),f.on("mousemove",function(){clearTimeout(w)})});var y={};s.open=l,s.close=r,s.selectData={id:[],name:[]},a.exports=s});