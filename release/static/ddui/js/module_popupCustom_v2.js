define("popupCustom_v2",function(e,a,n){function t(e){var a=o(e);return a.getCustomData(),a.ele&&a.ele.on("click",function(){a.openByEle({ele:a.ele})}),a}function o(e){var a={};for(var n in e)a[n]=e[n];return a.conf={ownEvent:e.ownEvent||"popupCustom",selected:"",type:e.type||"radio",group:[],showGroup:"",showList:[],groupData:{},other:{name:"",value:"",selected:!1},uploadFile:e.uploadFile||!1},a.getIdByName=u,a.getNameById=s,a.getCustomData=i,a.openByEle=p,a}function i(e){e=e||this,$.get(e.url||f,e.search,function(a){a&&a.data&&(r(a.data,e),e.ele&&m.bindAutoComplate(e.ele,e.autoData,e.ownEvent))},"json")}function r(e,a){var n=[],t={},o={},i={},r={},p=[];a.conf.selected=void 0,a.selected&&a.selected.id.forEach(function(e){r[e]=!0});for(var u in e){n.push({name:u,value:u});var s=[];e[u].forEach(function(e){var a=r[e.id]||!1;s.push({value:e.id,name:e.name,selected:a}),o[e.name]={id:e.id,name:e.name,parent:u,type:e.type},i[e.id]={id:e.id,name:e.name,parent:u,type:e.type},p.push(e.name)}),t[u]=[{item:s}]}n.sort(function(e,a){return a.value-e.value}),a.base={id_map:JSON.parse(JSON.stringify(i)),name_map:JSON.parse(JSON.stringify(o)),autoData:JSON.parse(JSON.stringify(p)),group:JSON.parse(JSON.stringify(n)),groupData:JSON.parse(JSON.stringify(t))},a.conf.group=n,a.conf.groupData=t,a.name_map=o,a.id_map=i,a.autoData=p}function p(e){var a=e.ele,n=e.autoComplateEvent||"autoComplateEvent";m.myEvent.init(n);var t=this;if(t.ele=a,e.conf)for(var o in e.conf)t.conf[o]=e.conf[o];m.myEvent.on(document,t.conf.ownEvent,function(){t.selected={id:l.selectData.id,name:t.getNameById(l.selectData.id)},t.ele.val(t.selected.name.join(";"))}),a.on("keydown",function(){l.close()});var i=[];i=t.getIdByName(a.val());var r=a.val().split(";");i&&t.name_map[r[0]]&&(t.conf.showGroup=t.name_map[r[0]].parent),m.bindAutoComplate(e.ele,t.autoData,n),l.open(t.conf,i,a)}function u(e){var a=this.ele,n=e||a.val();n=n.length?n.split(";"):[];var t=this.name_map,o=[];return t&&n.forEach(function(e){t[e]&&o.push(t[e].id)}),o}function s(e){var a=this.id_map,n=[];return Array.isArray(e)?e.forEach(function(e){a[e]&&n.push(a[e].name)}):a[e]&&n.push(a[e].name),n}var c={},l=e("basePopupSelect"),m=e("myTool"),f="/api/popup_customer.php";c.init=t,n.exports=c});